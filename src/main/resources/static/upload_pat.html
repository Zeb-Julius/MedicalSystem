<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>个人端-产品使用</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="layui/css/layui.css?t=1579039349486" media="all">
    <script src="js/jquery-3.4.1.min.js"></script>
    <style>
        .layui-nav .layui-this:after, .layui-nav-bar, .layui-nav-tree .layui-nav-itemed:after {
            background-color: #1E9FFF;
        }
        .layui-nav-tree .layui-nav-bar {
            background-color: #1E9FFF;
        }
        .layui-nav-tree .layui-nav-child dd.layui-this, .layui-nav-tree .layui-nav-child dd.layui-this a, .layui-nav-tree .layui-this, .layui-nav-tree .layui-this > a, .layui-nav-tree .layui-this > a:hover {
            background-color: #1E9FFF;
        }
        .layui-body {
            width: 100%;
            left: 0;
        }
        .layui-timeline-axis {
            color: #1E9FFF;
        }
        .layui-elem-quote {
            border-left: 5px solid #1E9FFF;
        }
    </style>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo" style="color:#1E9FFF;font-weight: 600;font-size: 22px">智音医疗系统</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
            <li class="layui-nav-item"><a href="patient.html">首页</a></li>
            <li class="layui-nav-item"><a href="introduce.html">平台简介</a></li>
            <li class="layui-nav-item"><a href="upload_pat.html">产品使用</a></li>
            <li class="layui-nav-item"><a href="patient.html">联系我们</a></li>
            <li class="layui-nav-item">
                <a href="javascript:;">其它</a>
                <dl class="layui-nav-child">
                    <dd><a href="">版权说明</a></dd>
                    <dd><a href="">授权管理</a></dd>
                    <dd><a href="">帮助</a></dd>
                </dl>
            </li>
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="img/patient.png" class="layui-nav-img">
                    李先生
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="">个人中心</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item"><a href="index.html">注销</a></li>
        </ul>
    </div>
    <div class="layui-body" style="bottom: 34px">
        <!-- 内容主体区域 -->
        <blockquote class="layui-elem-quote layui-text">
            完善信息并上传肺音音频，获取分析结果
            <a href="#" target="_blank" style="margin-left: 30px">信息提交失败？</a>
            <button style="margin-left: 900px" class="layui-btn" onclick="window.location.href='note_pat.html'">提交记录
            </button>
        </blockquote>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
            <legend>填写个人信息</legend>
        </fieldset>
        <form class="layui-form" action="" style="margin: 30px">
            <!--            <div class="layui-form-item">-->
            <!--                <label class="layui-form-label">单行输入框</label>-->
            <!--                <div class="layui-input-block">-->
            <!--                    <input type="text" name="title" lay-verify="title" autocomplete="off" placeholder="请输入标题" class="layui-input">-->
            <!--                </div>-->
            <!--            </div>-->
            <div class="layui-form-item">
                <label class="layui-form-label">用户姓名<span style="color: red "> *</span></label>
                <div class="layui-input-block">
                    <input type="text" name="username" lay-verify="required" lay-reqtext="姓名是必填项" placeholder="请输入姓名"
                           autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">手机号<span style="color: red "> *</span></label>
                    <div class="layui-input-inline">
                        <input type="tel" name="phone" lay-verify="required|phone" placeholder="请输入手机号"
                               autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">邮箱</label>
                    <div class="layui-input-inline">
                        <input type="text" name="email" placeholder="请输入邮箱" autocomplete="off" class="layui-input">
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">年龄<span style="color: red "> *</span></label>
                <div class="layui-input-block">
                    <select name="interest" lay-filter="aihao">
                        <option value="" selected=""></option>
                        <option value="0">5~20岁</option>
                        <option value="1">20~40岁</option>
                        <option value="2">40~60岁</option>
                        <option value="3">60岁以上</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">性别<span style="color: red "> *</span></label>
                <div class="layui-input-block">
                    <input type="radio" name="sex" value="男" title="男" checked="">
                    <input type="radio" name="sex" value="女" title="女">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">肺病病史<span style="color: red "> *</span></label>
                <div class="layui-input-block">
                    <input type="radio" name="havedisease" value="有" title="有">
                    <input type="radio" name="nodisease" value="无" title="无" checked="">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">所在地区</label>
                <div class="layui-input-inline">
                    <select name="quiz1">
                        <option value="">请选择省</option>
                        <option value="浙江" selected="">浙江省</option>
                        <option value="你的工号">江西省</option>
                        <option value="你最喜欢的老师">福建省</option>
                    </select>
                </div>
                <div class="layui-input-inline">
                    <select name="quiz2">
                        <option value="">请选择市</option>
                        <option value="杭州">杭州</option>
                        <option value="宁波" disabled="">宁波</option>
                        <option value="温州">温州</option>
                        <option value="温州">台州</option>
                        <option value="温州">绍兴</option>
                    </select>
                </div>
                <div class="layui-input-inline">
                    <select name="quiz3">
                        <option value="">请选择县/区</option>
                        <option value="西湖区">西湖区</option>
                        <option value="余杭区">余杭区</option>
                        <option value="拱墅区">临安市</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">真实填写您的症状<span style="color: red "> *</span></label>
                <div class="layui-input-block">
                    <textarea placeholder="请输入您的症状" class="layui-textarea"></textarea>
                </div>
            </div>
            <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
                <legend>上传您的肺音</legend>
            </fieldset>
            <div class="layui-upload" style="margin-left: 30px">
                <button type="button" class="layui-btn layui-btn-normal" id="testList">选择文件</button>
                <div class="layui-upload-list">
                    <table class="layui-table">
                        <thead>
                        <tr>
                            <th>文件名</th>
                            <th>大小</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody id="demoList"></tbody>
                    </table>
                </div>
                <button type="button" class="layui-btn" id="testListAction">开始上传</button>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block" style="margin-left: 30px;margin-top: 30px">
                    <button type="submit" class="layui-btn" lay-submit="" lay-filter="demo1">确认提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>

        </form>
        <div class="layui-form-item layui-form-text" style="margin: 30px">
            <label class="layui-form-label" style="font-weight: 600">肺音波形</label>
            <div id="space" style="width: 100%;height: 40px">
            </div>
            <div id="feiyin" style="display: none">
                <img src="./img/feiyin.png" style="width: 600px;height: 200px">
            </div>
            <label class="layui-form-label" style="font-weight: 600" style="margin-top: 20px">分析结果</label>
            <div class="layui-input-block" style="margin-top: 20px">
                <textarea placeholder="提交信息后，在此处查看音频分析结果" class="layui-textarea" disabled id="result"></textarea>
            </div>
        </div>
        <div class="layui-footer"
             style="line-height: 34px;height: 34px;color:rgba(255,255,255,.7);background-color: #23262E;left: 0;padding: 0;text-align: center">
            <!-- 底部固定区域 -->
            © 智音 -- 基于深度学习的肺病辅助诊断平台
        </div>
    </div>
    <script src="layui/layui.js?t=1579039349486" charset="utf-8"></script>
    <script src="layui/layui.all.js" charset="utf-8"></script>
    <script>
        //图片轮播
        layui.carousel.render({
            elem: '#pic'
            , width: '100%'
            , height: '100%'
            , interval: 3000
        });
        function change(s) {
            $("#if").attr("src", s);
        }
        layui.use('element', function () {
            var element = layui.element;
        });
    </script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?d214947968792b839fd669a4decaaffc";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
        var demoListView = $('#demoList')
            , uploadListIns = layui.upload.render({
            elem: '#testList'
            , url: 'https://httpbin.org/post' //改成您自己的上传接口
            , accept: 'file'
            , multiple: true
            , auto: false
            , bindAction: '#testListAction'
            , choose: function (obj) {
                var files = this.files = obj.pushFile(); //将每次选择的文件追加到文件队列
                //读取本地文件
                obj.preview(function (index, file, result) {
                    var tr = $(['<tr id="upload-' + index + '">'
                        , '<td>' + file.name + '</td>'
                        , '<td>' + (file.size / 1024).toFixed(1) + 'kb</td>'
                        , '<td>等待上传</td>'
                        , '<td>'
                        , '<button class="layui-btn layui-btn-xs demo-reload layui-hide">重传</button>'
                        , '<button class="layui-btn layui-btn-xs layui-btn-danger demo-delete">删除</button>'
                        , '</td>'
                        , '</tr>'].join(''));
                    //单个重传
                    tr.find('.demo-reload').on('click', function () {
                        obj.upload(index, file);
                    });
                    //删除
                    tr.find('.demo-delete').on('click', function () {
                        delete files[index]; //删除对应的文件
                        tr.remove();
                        uploadListIns.config.elem.next()[0].value = ''; //清空 input file 值，以免删除后出现同名文件不可选
                    });
                    demoListView.append(tr);
                });
            }
            , done: function (res, index, upload) {
                if (res.files.file) { //上传成功
                    var tr = demoListView.find('tr#upload-' + index)
                        , tds = tr.children();
                    tds.eq(2).html('<span style="color: #5FB878;">上传成功</span>');
                    tds.eq(3).html(''); //清空操作
                    return delete this.files[index]; //删除文件队列已经上传成功的文件
                }
                this.error(index, upload);
            }
            , error: function (index, upload) {
                var tr = demoListView.find('tr#upload-' + index)
                    , tds = tr.children();
                tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');
                tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传
            }
        });
        layui.use(['form', 'layedit', 'laydate'], function () {
            var form = layui.form
                , layer = layui.layer
                , layedit = layui.layedit
                , laydate = layui.laydate;
            //日期
            laydate.render({
                elem: '#date'
            });
            laydate.render({
                elem: '#date1'
            });
            //创建一个编辑器
            var editIndex = layedit.build('LAY_demo_editor');
            //自定义验证规则
            form.verify({
                title: function (value) {
                    if (value.length < 5) {
                        return '标题至少得5个字符啊';
                    }
                }
                , pass: [
                    /^[\S]{6,12}$/
                    , '密码必须6到12位，且不能出现空格'
                ]
                , content: function (value) {
                    layedit.sync(editIndex);
                }
            });
            //监听指定开关
            form.on('switch(switchTest)', function (data) {
                layer.msg('开关checked：' + (this.checked ? 'true' : 'false'), {
                    offset: '6px'
                });
                layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
            });
            //监听提交
            form.on('submit(demo1)', function (data) {
                layer.load(1, {
                    shade: [0.4, '#000'], //0.5透明度的灰色背景
                    content: '分析中',
                    success: function (layero) {
                        layero.find('.layui-layer-content').css({
                            'padding-top': '39px',
                            'width': '60px',
                            "color": "#FFFFFF"
                        });
                    }
                });
                setTimeout(function(){
                    layer.closeAll();  //可以是一句或是很多句代码，也可以是个函数
                    document.getElementById("feiyin").style.display = "block"
                    document.getElementById("space").style.display = "none"
                    document.getElementById("result").innerText= "哮喘"
                    layer.alert("分析完成！请在页面下方查看分析结果", {
                        title: '提示'
                    })
                },3000);　　　　//延时10秒

                return false;
            });
            //表单赋值
            layui.$('#LAY-component-form-setval').on('click', function () {
                form.val('example', {
                    "username": "贤心" // "name": "value"
                    , "password": "123456"
                    , "interest": 1
                    , "like[write]": true //复选框选中状态
                    , "close": true //开关状态
                    , "sex": "女"
                    , "desc": "我爱 layui"
                });
            });
            //表单取值
            layui.$('#LAY-component-form-getval').on('click', function () {
                var data = form.val('example');
                //加载中样式...

                alert("提交成功！请在页面下方查看分析结果")
                //alert(JSON.stringify(data));
            });
        });
    </script>
</div>
</body>
</html>
